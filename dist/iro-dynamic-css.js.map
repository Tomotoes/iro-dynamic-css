{"version":3,"sources":["webpack://iroDynamicCss/webpack/universalModuleDefinition","webpack://iroDynamicCss/webpack/bootstrap","webpack://iroDynamicCss/./index.js","webpack://iroDynamicCss/./stylesheet.js","webpack://iroDynamicCss/./util.js"],"names":["DynamicCssPlugin","iro","pluginOptions","throttleDelay","throttle","updateStylesheet","css","rgb","color","rgbString","selector","properties","property","stylesheet","setRule","ColorPicker","addHook","props","bind","IroStylesheet","Stylesheet","dynamicCss","version","VERSION","style","document","createElement","head","appendChild","createTextNode","sheet","map","value","rules","replace","$1","toLowerCase","hasOwnProperty","index","length","declaration","insertRule","e","addRule","setProperty","cssRules","disabled","Object","keys","selectorText","ruleText","cssText","join","reduce","result","ruleSet","i","getPropertyValue","callback","delay","timer","fn","setTimeout"],"mappings":"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","file":"iro-dynamic-css.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"iroDynamicCss\"] = factory();\n\telse\n\t\troot[\"iroDynamicCss\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import IroStylesheet from './stylesheet.js';\nimport { throttle } from './util.js';\n\nconst DynamicCssPlugin = function(iro, pluginOptions) {\n\n  const throttleDelay = pluginOptions.throttle || null;\n\n  const updateStylesheet = function() {\n    const css = this.css;\n    const rgb = this.color.rgbString;\n    for (let selector in css) {\n      let properties = css[selector];\n      for (let property in properties) {\n        this.stylesheet.setRule(selector, property, rgb);\n      }\n    }\n  }\n\n  iro.ColorPicker.addHook('init:before', function() {\n    this.css = this.props.css || {};\n    this.updateStylesheet = throttleDelay ? throttle(updateStylesheet.bind(this), throttleDelay) : updateStylesheet.bind(this);\n  });\n\n  iro.ColorPicker.addHook('mount', function() {\n    this.stylesheet = new IroStylesheet();\n    this.updateStylesheet();\n  });\n\n  iro.ColorPicker.addHook('color:afterUpdate', function() {\n    this.updateStylesheet();\n  });\n\n  iro.Stylesheet = IroStylesheet;\n\n  iro.dynamicCss = {\n    version: VERSION\n  };\n\n}\n\nexport default DynamicCssPlugin;","export default class Stylesheet {\n  /**\n    @constructor stylesheet writer\n  */\n  constructor() {\n    // Create a new style element\n    const style = document.createElement('style');\n    document.head.appendChild(style);\n    // Webkit apparently requires a text node to be inserted into the style element\n    // (according to https://davidwalsh.name/add-rules-stylesheets)\n    style.appendChild(document.createTextNode(''));\n    this.style = style;\n    // Create a reference to the style element's CSSStyleSheet object\n    // CSSStyleSheet API: https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleSheet\n    this.sheet = style.sheet;\n    // We'll store references to all the CSSStyleDeclaration objects that we change here, keyed by the CSS selector they belong to\n    // CSSStyleDeclaration API: https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration\n    this.map = {};\n  }\n\n  get rules() {\n    // Get a reference to the sheet's CSSRuleList object\n    // CSSRuleList API: https://developer.mozilla.org/en-US/docs/Web/API/CSSRuleList\n    return this.sheet.rules || this.sheet.cssRules;\n  }\n\n  get enabled() {\n    return !this.sheet.disabled;\n  }\n\n  set enabled(value) {\n    this.sheet.disabled = !value;\n  }\n\n  /**\n    * @desc Set a specific rule for a given selector\n    * @param {String} selector - the CSS selector for this rule (e.g. \"body\", \".class\", \"#id\")\n    * @param {String} property - the CSS property to set (e.g. \"background-color\", \"font-family\", \"z-index\")\n    * @param {String} value    - the new value for the rule (e.g. \"rgb(255, 255, 255)\", \"Helvetica\", \"99\")\n  */\n  setRule(selector, property, value) {\n    const { sheet, map, rules } = this;\n    // Convert property from camelCase to snake-case\n    property = property.replace(/([A-Z])/g, function($1) {\n      return '-' + $1.toLowerCase();\n    });\n\n    if (!map.hasOwnProperty(selector)) {\n      // If the selector hasn't been used yet we want to insert the rule at the end of the CSSRuleList, so we use its length as the index value\n      const index = rules.length;\n      // Prepare the rule declaration text, since both insertRule and addRule take this format\n      const declaration = `${property}: ${value}`;\n      // Insert the new rule into the stylesheet\n      try {\n        // Some browsers only support insertRule, others only support addRule, so we have to use both\n        sheet.insertRule(`${selector} {${declaration};}`, index);\n      } catch(e) {\n        sheet.addRule(selector, declaration, index);\n      } finally {\n        // Add our newly inserted rule's CSSStyleDeclaration object to the internal map\n        map[selector] = this.rules[index].style;\n      }\n    }\n    else {\n      map[selector].setProperty(property, value);\n    }\n  }\n\n  /**\n    * @desc Get the stylesheet text\n    * @return {String} css text\n  */\n  get cssText() {\n    const { map } = this;\n    return Object.keys(map).map(selector => {\n      const selectorText = selector.replace(/,\\W/g, ',\\n');\n      const ruleText = map[selector].cssText.replace(/;\\W/g, ';\\n\\t');\n      return `${selectorText} {\\n\\t${ruleText}\\n}`;\n    }).join('\\n');\n  }\n\n  /**\n    * @desc Get an object representing the current css styles\n    * @return {Object} css object\n  */\n  get css() {\n    const { map } = this;\n    return Object.keys(map).reduce((result, selector) => {\n      const ruleSet = map[selector];\n      result[selector] = {};\n      for (var i = 0; i < ruleSet.length; i++) {\n        const property = ruleSet[i];\n        result[selector][property] = ruleSet.getPropertyValue(property);\n      }\n      return result;\n    }, {});\n  }\n}","export const throttle = function(callback, delay) {\n  let timer = null;\n  \n  const fn = () => {\n    callback();\n    timer = null;\n  }\n  \n  return function() {\n    if (!timer) timer = setTimeout(fn, delay);\n  }\n}"],"sourceRoot":""}